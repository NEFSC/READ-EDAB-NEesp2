<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Using MRIP Data for Recreational Indicators • NEesp2</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using MRIP Data for Recreational Indicators">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">NEesp2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-about-esp" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">About ESP</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-about-esp">
<li><a class="dropdown-item" href="../articles/why-esp.html">Why ESP?</a></li>
    <li><a class="dropdown-item" href="../articles/indicator-sources.html">Indicator Sources for Northeast ESPs</a></li>
    <li><a class="dropdown-item" href="../articles/esp-links.html">Northeast ESP Links</a></li>
  </ul>
</li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes">
<li><a class="dropdown-item" href="../articles/install-and-use-package.html">Install and Use Package</a></li>
    <li><a class="dropdown-item" href="../articles/general-workflow.html">General Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/rmarkdown-intro.html">RMarkdown Intro</a></li>
    <li><a class="dropdown-item" href="../articles/using_edab_utils.html">Using EDAB-Utils R package</a></li>
    <li><a class="dropdown-item" href="../articles/accessing-survdat-data.html">Accessing Bottom Trawl Survey Data</a></li>
    <li><a class="dropdown-item" href="../articles/using_mrip_data.html">Using MRIP Data for Recreational Indicators</a></li>
    <li><a class="dropdown-item" href="../articles/using_survdat_data.html">Using {survdat} for Bottom Trawl Indicators</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="nav-link" href="../mailto:stephanie.owen@noaa.gov"><span class="fa fas fa-paper-plane fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NEFSC/READ-EDAB-NEesp2/issues/"><span class="fa fas fa-question-circle fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NEFSC/READ-EDAB-NEesp2"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://nmfs-general-modeling-tools.github.io/"><span class="fa fa-fish"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Using MRIP Data for Recreational Indicators</h1>
                        <h4 data-toc-skip class="author">Stephanie
Owen</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/NEFSC/READ-EDAB-NEesp2/blob/HEAD/vignettes/using_mrip_data.Rmd" class="external-link"><code>vignettes/using_mrip_data.Rmd</code></a></small>
      <div class="d-none name"><code>using_mrip_data.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="obtaining-raw-mrip-data">Obtaining Raw MRIP Data<a class="anchor" aria-label="anchor" href="#obtaining-raw-mrip-data"></a>
</h2>
<p>Data pulls from NOAA Fisheries’ Marine Recreational Information
Program (MRIP) can be done through the MRIP Query Tool (<a href="https://www.fisheries.noaa.gov/data-tools/recreational-fisheries-statistics-queries" class="external-link uri">https://www.fisheries.noaa.gov/data-tools/recreational-fisheries-statistics-queries</a>).</p>
<p>At this time, queries must be saved as a csv and loaded into R. The
raw data includes lines of metadata and description and does not format
nicely. The following lines of code remove the extra information and
modifies the remaining data into columns while reading in each csv file.
The files used in this vignette are found in the ‘data-raw’ folder in
this package.</p>
<p>Catch, landings, and effort data can be read in as one file with
multiple years. Directed trips must be downloaded for each year of
interest.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># catch data</span></span>
<span><span class="va">mrip_catch</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">'data-raw/mrip_BLACK_SEA_BASS_catch_series.csv'</span><span class="op">)</span>,</span>
<span>                                  skip <span class="op">=</span> <span class="fl">46</span>, <span class="co"># of rows you want to ignore</span></span>
<span>                                  na.strings <span class="op">=</span> <span class="st">"."</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://sfirke.github.io/janitor/reference/clean_names.html" class="external-link">clean_names</a></span><span class="op">(</span>case <span class="op">=</span> <span class="st">"all_caps"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># landings data</span></span>
<span><span class="va">mrip_landing</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">'data-raw/mrip_BLACK_SEA_BASS_harvest.csv'</span><span class="op">)</span>,</span>
<span>                         skip <span class="op">=</span> <span class="fl">46</span>, <span class="co"># of rows you want to ignore</span></span>
<span>                         na.strings <span class="op">=</span> <span class="st">"."</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://sfirke.github.io/janitor/reference/clean_names.html" class="external-link">clean_names</a></span><span class="op">(</span>case <span class="op">=</span> <span class="st">"all_caps"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># effort data </span></span>
<span><span class="va">mrip_effort</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">'data-raw/mrip_effort_series.csv'</span><span class="op">)</span>,</span>
<span>                        skip <span class="op">=</span> <span class="fl">44</span>, <span class="co"># of rows you want to ignore</span></span>
<span>                        na.strings <span class="op">=</span> <span class="st">"."</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://sfirke.github.io/janitor/reference/clean_names.html" class="external-link">clean_names</a></span><span class="op">(</span>case <span class="op">=</span> <span class="st">"all_caps"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># trips files</span></span>
<span><span class="va">path</span> <span class="op">=</span> <span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">'data-raw/mrip_directed_trips'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">path</span>, </span>
<span>                    pattern <span class="op">=</span> <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/glob2rx.html" class="external-link">glob2rx</a></span><span class="op">(</span><span class="st">'mrip*.csv'</span><span class="op">)</span>,</span>
<span>                    full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>This vignette shows example data pulls and plots used for the 2025
black sea bass ESP report card: - Total Recreational Catch - Total
Recreational Trips - Recreational Effort (proportion of trips targeting
black sea bass) - Total Recreational Landings</p>
</div>
<div class="section level2">
<h2 id="run-mrip-functions-and-plot-time-series">Run MRIP functions and plot time series<a class="anchor" aria-label="anchor" href="#run-mrip-functions-and-plot-time-series"></a>
</h2>
<p>The code for functions referenced here can be found in
‘create_recreational_indicators.R’ and ‘plot_indicator_ts.R’.</p>
<div class="section level3">
<h3 id="black-sea-bass-recreational-catch">Black Sea Bass Recreational Catch<a class="anchor" aria-label="anchor" href="#black-sea-bass-recreational-catch"></a>
</h3>
<p>Query ‘Time Series’ under ‘Catch Data’.</p>
<p>Choose years of interest, summarize by Annual, Calendar Year,
Atlantic coast by state, Black Sea Bass, all modes and areas, Total
Catch</p>
<p>Download csv as output</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">total_rec_catch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_total_rec_catch.html">create_total_rec_catch</a></span><span class="op">(</span><span class="va">mrip_catch</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plt_indicator.html">plt_indicator</a></span><span class="op">(</span><span class="va">total_rec_catch</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error in loadNamespace(x) : there is no package called 'arfit'</span></span></code></pre>
<pre><code><span><span class="co">## Warning: Computation failed in `stat_lm()`.</span></span>
<span><span class="co">## Caused by error in `linear_ar1$pValue`:</span></span>
<span><span class="co">## <span style="color: #BBBB00;">!</span> $ operator is invalid for atomic vectors</span></span></code></pre>
<p><img src="using_mrip_data_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="black-sea-bass-recreational-landings">Black Sea Bass Recreational Landings<a class="anchor" aria-label="anchor" href="#black-sea-bass-recreational-landings"></a>
</h3>
<p>Query ‘Time Series’ under ‘Catch Data’.</p>
<p>Choose years of interest, summarize by Annual, Calendar Year,
Atlantic Coast by State, Black Sea Bass, all modes and areas, Harvest (A
+ B1), choose # of fish/weight (lbs), mean length and weight</p>
<p>Download csv as output</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">total_rec_landings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_total_rec_landings.html">create_total_rec_landings</a></span><span class="op">(</span><span class="va">mrip_landing</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plt_indicator.html">plt_indicator</a></span><span class="op">(</span><span class="va">total_rec_landings</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error in loadNamespace(x) : there is no package called 'arfit'</span></span></code></pre>
<pre><code><span><span class="co">## Warning: Computation failed in `stat_lm()`.</span></span>
<span><span class="co">## Caused by error in `linear_ar1$pValue`:</span></span>
<span><span class="co">## <span style="color: #BBBB00;">!</span> $ operator is invalid for atomic vectors</span></span></code></pre>
<p><img src="using_mrip_data_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="black-sea-bass-total-recreational-trips">Black Sea Bass Total Recreational Trips<a class="anchor" aria-label="anchor" href="#black-sea-bass-total-recreational-trips"></a>
</h3>
<p>Query ‘Directed Trip’ under ‘Effort Data’.</p>
<p>Choose year of interest, summarize by Annual, Calendar Year, Atlantic
coast by state, Black Sea Bass, all modes and areas, Primary Target</p>
<p>Download csv as output</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rec_trips</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_rec_trips.html">create_rec_trips</a></span><span class="op">(</span>files <span class="op">=</span> <span class="va">files</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plt_indicator.html">plt_indicator</a></span><span class="op">(</span><span class="va">rec_trips</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error in loadNamespace(x) : there is no package called 'arfit'</span></span></code></pre>
<pre><code><span><span class="co">## Warning: Computation failed in `stat_lm()`.</span></span>
<span><span class="co">## Caused by error in `linear_ar1$pValue`:</span></span>
<span><span class="co">## <span style="color: #BBBB00;">!</span> $ operator is invalid for atomic vectors</span></span></code></pre>
<p><img src="using_mrip_data_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="black-sea-bass-recreational-effort">Black Sea Bass Recreational Effort<a class="anchor" aria-label="anchor" href="#black-sea-bass-recreational-effort"></a>
</h3>
<p>Note: must run ‘create_rec_trips’ prior to obtain ‘rec_trips’
dataset.</p>
<p>Query ‘Time Series’ under ‘Effort Data’.</p>
<p>Choose years of interest, summarize by Annual, Calendar Year,
Atlantic Coast by State, all modes and areas</p>
<p>Download csv as output</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prop_sp_trips</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_prop_sp_trips.html">create_prop_sp_trips</a></span><span class="op">(</span>total_trips <span class="op">=</span> <span class="va">mrip_effort</span>, </span>
<span>                                      species_trips <span class="op">=</span> <span class="va">rec_trips</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plt_indicator.html">plt_indicator</a></span><span class="op">(</span><span class="va">prop_sp_trips</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error in loadNamespace(x) : there is no package called 'arfit'</span></span></code></pre>
<pre><code><span><span class="co">## Warning: Computation failed in `stat_lm()`.</span></span>
<span><span class="co">## Caused by error in `linear_ar1$pValue`:</span></span>
<span><span class="co">## <span style="color: #BBBB00;">!</span> $ operator is invalid for atomic vectors</span></span></code></pre>
<p><img src="using_mrip_data_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/atyrell3" class="external-link">Abigail Tyrell</a>, <a href="https://github.com/stephanie-owen" class="external-link">Stephanie Owen</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
